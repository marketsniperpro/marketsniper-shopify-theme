<section class="contact-section">
  <div class="container">
    <div class="section-header animate-contact-header">
      <h2>{{ section.settings.title | default: "Contact Market Sniper" }}</h2>
      <p>{{ section.settings.subtitle | default: "Have questions? We're here to help you succeed in your trading journey" }}</p>
    </div>

    <div class="contact-form-wrapper animate-contact-form">
      {% form 'contact' %}
        {% if form.posted_successfully? %}
          <div class="form-success">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            <p>{{ section.settings.success_message | default: "Thanks for contacting us! We'll get back to you as soon as possible." }}</p>
          </div>
        {% endif %}

        {% if form.errors %}
          <div class="form-errors">
            <p>Please fix the following errors:</p>
            <ul>
              {% for field in form.errors %}
                <li>{{ field }} - {{ form.errors.messages[field] }}</li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}

        <div class="form-row">
          <div class="form-group">
            <label for="contact-name">Name</label>
            <input 
              type="text" 
              id="contact-name" 
              name="contact[name]" 
              placeholder="Your name"
              value="{% if form.name %}{{ form.name }}{% endif %}"
              required
            >
          </div>

          <div class="form-group">
            <label for="contact-email">Email</label>
            <input 
              type="email" 
              id="contact-email" 
              name="contact[email]" 
              placeholder="your.email@example.com"
              value="{% if form.email %}{{ form.email }}{% endif %}"
              required
            >
          </div>
        </div>

        <div class="form-group">
          <label for="contact-message">Message</label>
          <textarea 
            id="contact-message" 
            name="contact[body]" 
            rows="6"
            placeholder="Tell us how we can help..."
            required
          >{% if form.body %}{{ form.body }}{% endif %}</textarea>
        </div>

        <button type="submit" class="submit-btn">
          {{ section.settings.button_text | default: "Send Message" }}
        </button>
      {% endform %}
    </div>
  </div>
</section>

<style>
  /* Contact page animations */
  .animate-contact-header {
    opacity: 0;
    transform: translateX(-50px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }

  .animate-contact-header.visible {
    opacity: 1;
    transform: translateX(0);
  }

  .animate-contact-form {
    opacity: 0;
    transform: translateX(-50px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    transition-delay: 0.3s;
  }

  .animate-contact-form.visible {
    opacity: 1;
    transform: translateX(0);
  }
</style>

<script>
  // Contact page animation on scroll
  (function() {
    function initContactAnimations() {
      const contactElements = document.querySelectorAll('.animate-contact-header, .animate-contact-form');
      
      if (contactElements.length === 0) return;
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '0px'
      });
      
      contactElements.forEach(el => observer.observe(el));
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initContactAnimations);
    } else {
      initContactAnimations();
    }
  })();
</script>

{% schema %}
{
  "name": "Contact Form",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Contact Market Sniper"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Have questions? We're here to help you succeed in your trading journey"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Success Message",
      "default": "Thanks for contacting us! We'll get back to you as soon as possible."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Submit Button Text",
      "default": "Send Message"
    }
  ]
}
{% endschema %}